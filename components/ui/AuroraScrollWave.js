"use client";
import { cn } from "@/lib/utils";
import { motion } from "motion/react";
import React, { useState, useEffect } from "react";

const autofillTransition = {
  duration: 3,
  ease: "easeInOut",
  repeat: Infinity,
  repeatType: "reverse",
  repeatDelay: 1,
};

const getStaggeredTransition = (delay = 0) => ({
  ...autofillTransition,
  delay,
});

export const GoogleGeminiEffect = ({ className }) => {
  const [dimensions, setDimensions] = useState({ width: 1440, height: 500 });
  
  useEffect(() => {
    const updateDimensions = () => {
      const width = Math.max(window.innerWidth, 1440);
      setDimensions({ width, height: 500 });
    };
    
    updateDimensions();
    window.addEventListener('resize', updateDimensions);
    return () => window.removeEventListener('resize', updateDimensions);
  }, []);

  const extraWidth = Math.max(0, dimensions.width - 1440);
  const leftExtension = extraWidth / 2;
  const rightExtension = extraWidth / 2;

  const leftStart = -leftExtension;
  const rightEnd = 1440 + rightExtension;
 
  const viewBoxX = leftStart;
  const viewBoxWidth = dimensions.width;

  return (
    <div className={cn("flex justify-center items-center min-h-screen", className)}>
      <div className="relative w-full h-[500px] flex items-center justify-center">
        <svg
          width="100%"
          height="100%"
          viewBox={`${viewBoxX} 0 ${viewBoxWidth} 500`}
          xmlns="http://www.w3.org/2000/svg"
          className="w-full h-full"
          preserveAspectRatio="xMidYMid slice"
        >
          <g transform="translate(0, 70)">
            <motion.path
              d={`M${leftStart} 400${leftExtension > 0 ? `L0 400` : ''}C145.5 400 191 403.265 269 384C326.5 367 339.5 358 397.5 303C439 268.5 455 266.5 490 260C509.664 256.348 521 240.736 538 241.236C553.591 241.236 562.429 251.739 584.66 259.749C592.042 262.408 600.2 263.237 607.356 260.019C624.755 252.195 641.446 233.324 657 233.735C673.408 233.735 693.545 256.572 712.903 263.769C718.727 265.934 725.184 265.395 730.902 262.965C751.726 254.115 764.085 234.106 782 233.735C794.831 233.47 804.103 245.859 822.469 255.515C835.13 262.171 850.214 263.815 862.827 257.069C875.952 250.049 889.748 239.706 903.5 240.736C922.677 242.171 935.293 247.562 945.817 252.673C954.234 256.76 963.095 259.792 972.199 261.954C996.012 267.611 1007.42 271.118 1034 286C1077.5 310.359 1082.5 331.5 1140 366C1206 407 1328.5 399.5 1440 399.5${rightExtension > 0 ? `L${rightEnd} 399.5` : ''}`}
              stroke="#FFB7C5"
              strokeWidth="10"
              fill="none"
              initial={{ pathLength: 0 }}
              animate={{ pathLength: 1 }}
              transition={getStaggeredTransition(0)}
            />

            <motion.path
              d={`M${leftStart} 324.5${leftExtension > 0 ? `L0 324.5` : ''}C147 324.5 277 324.5 310 310.5C348 300 392.5 280.5 408 272C434 260.5 426 263.235 479 252.235C494 249.729 523 247.435 534.5 249.735C554.5 253.735 555.5 260.235 576 260.735C592 260.735 616 233.735 633 234.235C648.671 234.235 661.31 252.052 684.774 261.942C692.004 264.989 700.2 265.738 707.349 262.505C724.886 254.575 741.932 235.33 757.5 235.742C773.864 235.742 791.711 257.623 810.403 264.654C816.218 266.841 822.661 266.246 828.451 263.991C849.246 255.893 861.599 239.112 879.5 238.742C886.47 238.597 896.865 243.047 907.429 247.911C930.879 258.707 957.139 256.639 982.951 257.063C1020.91 257.686 1037.5 267.797 1056.5 274C1102.24 293.627 1116.5 307.704 1180.5 316.235C1257.5 326.5 1279 324 1440 325${rightExtension > 0 ? `L${rightEnd} 325` : ''}`}
              stroke="#FFDDB7"
              strokeWidth="10"
              fill="none"
              initial={{ pathLength: 0 }}
              animate={{ pathLength: 1 }}
              transition={getStaggeredTransition(0.5)}
            />

            <motion.path
              d={`M${leftStart} 251${leftExtension > 0 ? `L0 251` : ''}C147.5 251.333 294.5 250.735 380.5 250.735C405.976 251.94 422.849 252.228 436.37 252.123C477.503 251.803 518.631 243.605 559.508 248.197C564.04 248.706 569.162 249.524 575 250.735C588 253.433 616 258.702 627.5 256.402C647.5 252.402 659 236.235 680.5 236.235C700.5 236.235 725 266.235 742 265.735C757.654 265.735 768.77 247.583 791.793 237.59C798.991 234.465 807.16 233.777 814.423 236.745C832.335 244.064 850.418 261.648 866 261.235C882.791 261.235 902.316 246.786 921.814 242.392C926.856 241.255 932.097 241.674 937.176 242.631C966.993 248.248 970.679 251.346 989.5 251.735C1006.3 252.083 1036.5 250.235 1055.5 250.235C1114.5 250.235 1090.5 250.235 1124 250.235C1177.5 250.235 1178.99 251.402 1241 251.402C1317.5 251.402 1274.5 249.568 1440 250.235${rightExtension > 0 ? `L${rightEnd} 250.235` : ''}`}
              stroke="#B1C5FF"
              strokeWidth="10"
              fill="none"
              initial={{ pathLength: 0 }}
              animate={{ pathLength: 1 }}
              transition={getStaggeredTransition(1)}
            />

            <motion.path
              d={`M${leftStart} 175.5${leftExtension > 0 ? `L0 175.5` : ''}C150.5 175.5 261 175.318 323.5 193.5C351 201.5 387.517 221.001 423.5 231.5C447.371 238.465 472 240.735 487 244.735C503.786 249.212 504.5 253.808 523 255.735C547 258.235 564.814 238.235 584.5 238.235C604.5 238.235 626 266.069 643 265.569C658.676 265.569 672.076 248.63 695.751 238.972C703.017 236.008 711.231 235.208 718.298 238.617C735.448 246.889 751.454 266.98 767 266.569C783.364 266.569 801.211 244.687 819.903 237.657C825.718 235.469 832.141 236.104 837.992 238.194C859.178 245.764 873.089 260.365 891 260.735C907.8 261.083 923 241.235 963 243.735C1034.5 243.735 1047.5 229.68 1071 218.5C1122.5 194 1142.23 189.871 1185 183.5C1255.5 173 1294 176 1439.5 176${rightExtension > 0 ? `L${rightEnd} 176` : ''}`}
              stroke="#4FABFF"
              strokeWidth="10"
              fill="none"
              initial={{ pathLength: 0 }}
              animate={{ pathLength: 1 }}
              transition={getStaggeredTransition(1.5)}
            />

            <motion.path
              d={`M${leftStart} 101${leftExtension > 0 ? `L0.5 101` : ''}C145.288 99.349 195 98.5 265.5 115C322 128.223 399.182 194.5 411 204.5C424.176 215.649 456.916 228.677 496.259 239.699C498.746 240.396 501.16 241.304 503.511 242.374C517.104 248.558 541.149 257.911 551.5 258.236C571.5 258.236 590 235.736 611.5 235.736C631.5 235.736 652.5 266.236 669.5 265.736C685.171 265.736 697.81 247.924 721.274 238.036C728.505 234.988 736.716 234.231 743.812 237.579C761.362 245.857 778.421 266.148 794 265.736C810.375 265.736 829.35 245.68 848.364 239.179C854.243 237.169 860.624 237.802 866.535 239.718C886.961 246.338 898.141 256.866 916 257.236C932.8 257.583 934.5 247.236 967.5 238.736C1011.5 228 1007.5 230.5 1029.5 217C1069.5 190.5 1072 177.442 1128.5 140.5C1180.5 106.5 1275 97.374 1439 101${rightExtension > 0 ? `L${rightEnd} 101` : ''}`}
              stroke="#076EFF"
              strokeWidth="10"
              fill="none"
              initial={{ pathLength: 0 }}
              animate={{ pathLength: 1 }}
              transition={getStaggeredTransition(2)}
            />
            <path
              d={`M${leftStart} 400${leftExtension > 0 ? `L0 400` : ''}C145.5 400 191 403.265 269 384C326.5 367 339.5 358 397.5 303C439 268.5 455 266.5 490 260C509.664 256.348 521 240.736 538 241.236C553.591 241.236 562.429 251.739 584.66 259.749C592.042 262.408 600.2 263.237 607.356 260.019C624.755 252.195 641.446 233.324 657 233.735C673.408 233.735 693.545 256.572 712.903 263.769C718.727 265.934 725.184 265.395 730.902 262.965C751.726 254.115 764.085 234.106 782 233.735C794.831 233.47 804.103 245.859 822.469 255.515C835.13 262.171 850.214 263.815 862.827 257.069C875.952 250.049 889.748 239.706 903.5 240.736C922.677 242.171 935.293 247.562 945.817 252.673C954.234 256.76 963.095 259.792 972.199 261.954C996.012 267.611 1007.42 271.118 1034 286C1077.5 310.359 1082.5 331.5 1140 366C1206 407 1328.5 399.5 1440 399.5${rightExtension > 0 ? `L${rightEnd} 399.5` : ''}`}
              stroke="#FFB7C5"
              strokeWidth="10"
              fill="none"
              pathLength={1}
              filter="url(#blurMe)"
            />
            <path
              d={`M${leftStart} 324.5${leftExtension > 0 ? `L0 324.5` : ''}C147 324.5 277 324.5 310 310.5C348 300 392.5 280.5 408 272C434 260.5 426 263.235 479 252.235C494 249.729 523 247.435 534.5 249.735C554.5 253.735 555.5 260.235 576 260.735C592 260.735 616 233.735 633 234.235C648.671 234.235 661.31 252.052 684.774 261.942C692.004 264.989 700.2 265.738 707.349 262.505C724.886 254.575 741.932 235.33 757.5 235.742C773.864 235.742 791.711 257.623 810.403 264.654C816.218 266.841 822.661 266.246 828.451 263.991C849.246 255.893 861.599 239.112 879.5 238.742C886.47 238.597 896.865 243.047 907.429 247.911C930.879 258.707 957.139 256.639 982.951 257.063C1020.91 257.686 1037.5 267.797 1056.5 274C1102.24 293.627 1116.5 307.704 1180.5 316.235C1257.5 326.5 1279 324 1440 325${rightExtension > 0 ? `L${rightEnd} 325` : ''}`}
              stroke="#FFDDB7"
              strokeWidth="10"
              fill="none"
              pathLength={1}
              filter="url(#blurMe)"
            />
            <path
              d={`M${leftStart} 251${leftExtension > 0 ? `L0 251` : ''}C147.5 251.333 294.5 250.735 380.5 250.735C405.976 251.94 422.849 252.228 436.37 252.123C477.503 251.803 518.631 243.605 559.508 248.197C564.04 248.706 569.162 249.524 575 250.735C588 253.433 616 258.702 627.5 256.402C647.5 252.402 659 236.235 680.5 236.235C700.5 236.235 725 266.235 742 265.735C757.654 265.735 768.77 247.583 791.793 237.59C798.991 234.465 807.16 233.777 814.423 236.745C832.335 244.064 850.418 261.648 866 261.235C882.791 261.235 902.316 246.786 921.814 242.392C926.856 241.255 932.097 241.674 937.176 242.631C966.993 248.248 970.679 251.346 989.5 251.735C1006.3 252.083 1036.5 250.235 1055.5 250.235C1114.5 250.235 1090.5 250.235 1124 250.235C1177.5 250.235 1178.99 251.402 1241 251.402C1317.5 251.402 1274.5 249.568 1440 250.235${rightExtension > 0 ? `L${rightEnd} 250.235` : ''}`}
              stroke="#B1C5FF"
              strokeWidth="10"
              fill="none"
              pathLength={1}
              filter="url(#blurMe)"
            />
            <path
              d={`M${leftStart} 175.5${leftExtension > 0 ? `L0 175.5` : ''}C150.5 175.5 261 175.318 323.5 193.5C351 201.5 387.517 221.001 423.5 231.5C447.371 238.465 472 240.735 487 244.735C503.786 249.212 504.5 253.808 523 255.735C547 258.235 564.814 238.235 584.5 238.235C604.5 238.235 626 266.069 643 265.569C658.676 265.569 672.076 248.63 695.751 238.972C703.017 236.008 711.231 235.208 718.298 238.617C735.448 246.889 751.454 266.98 767 266.569C783.364 266.569 801.211 244.687 819.903 237.657C825.718 235.469 832.141 236.104 837.992 238.194C859.178 245.764 873.089 260.365 891 260.735C907.8 261.083 923 241.235 963 243.735C1034.5 243.735 1047.5 229.68 1071 218.5C1122.5 194 1142.23 189.871 1185 183.5C1255.5 173 1294 176 1439.5 176${rightExtension > 0 ? `L${rightEnd} 176` : ''}`}
              stroke="#4FABFF"
              strokeWidth="10"
              fill="none"
              pathLength={1}
              filter="url(#blurMe)"
            />
            <path
              d={`M${leftStart} 101${leftExtension > 0 ? `L0.5 101` : ''}C145.288 99.349 195 98.5 265.5 115C322 128.223 399.182 194.5 411 204.5C424.176 215.649 456.916 228.677 496.259 239.699C498.746 240.396 501.16 241.304 503.511 242.374C517.104 248.558 541.149 257.911 551.5 258.236C571.5 258.236 590 235.736 611.5 235.736C631.5 235.736 652.5 266.236 669.5 265.736C685.171 265.736 697.81 247.924 721.274 238.036C728.505 234.988 736.716 234.231 743.812 237.579C761.362 245.857 778.421 266.148 794 265.736C810.375 265.736 829.35 245.68 848.364 239.179C854.243 237.169 860.624 237.802 866.535 239.718C886.961 246.338 898.141 256.866 916 257.236C932.8 257.583 934.5 247.236 967.5 238.736C1011.5 228 1007.5 230.5 1029.5 217C1069.5 190.5 1072 177.442 1128.5 140.5C1180.5 106.5 1275 97.374 1439 101${rightExtension > 0 ? `L${rightEnd} 101` : ''}`}
              stroke="#076EFF"
              strokeWidth="10"
              fill="none"
              pathLength={1}
              filter="url(#blurMe)"
            />
          </g>
          <defs>
            <filter id="blurMe">
              <feGaussianBlur in="SourceGraphic" stdDeviation="5" />
            </filter>
          </defs>
        </svg>
      </div>
    </div>
  );
};
